function [w,d,s] = gps_week(tv)%   [w,d,s] = gps_week(tv)%   Converts a date vector into GPS week %   and GPS second of the week.%   Input is a 6-element time vector containing%       [year, mo, day, hrs, minutes, seconds]%	or a nx6 matrix with a datevector in each row.%   Outputs are: w = GPS week, d = day of week%       and s = GPS second of the week.if size(tv,2)~=6,   tv = tv' ;endUT = tv(:,4:6)*[1;1/60;1/3600] ;k = find(tv(:,2)<=2) ;tv(k,1) = tv(k,1)-1 ;tv(k,2) = tv(k,2)+12 ;JD = fix(365.25*tv(:,1)) + fix(30.6001*(tv(:,2)+1)) + tv(:,3) + (UT/24) + 1720981.5 ;w = fix((JD-2444244.5)/7) ;d = fix((((JD-2444244.5)/7)-w)*7) ;s = round((((JD-2444244.5)/7)-w)*7*24*3600) ;